{"ast":null,"code":"var _jsxFileName = \"/Users/zelinpu/Desktop/the-mountain/src/Snip.js\";\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport { Button, Box, Container, Grid } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport FaceFeedback from \"./table\";\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345\n  },\n  grid_root: {\n    flexGrow: 1\n  }\n});\nexport default function ImgCard(props) {\n  const classes = useStyles();\n  const [isSendingSkin, setIsSendingSkin] = useState(false);\n  const [isSendingOrgans, setIsSendingOrgans] = useState(false);\n  const isMounted = useRef(true);\n  const skin_color = ['透白', '白皙', '自然', '小麦', '黝黑'];\n  const left_eyelids = ['单眼皮', '平行双眼皮', '扇形双眼皮'];\n  const right_eyelids = ['单眼皮', '平行双眼皮', '扇形双眼皮'];\n  const crows_feet = ['无', '有'];\n  const dark_circle = ['无', '色素型', '血管型', '阴影型'];\n  const blackhead = ['无', '轻度', '中度', '重度'];\n  const skin_type = ['油性', '干性', '中性', '混合性'];\n  const res = {\n    \"request_id\": \"1620115798,588af52b-1a18-4218-b1e1-e8cb29b2735d\",\n    \"time_used\": 203,\n    \"result\": {\n      \"skin_color\": {\n        \"value\": 2,\n        \"confidence\": 0.5478226\n      },\n      \"skin_age\": {\n        \"value\": 23\n      },\n      \"left_eyelids\": {\n        \"value\": 2,\n        \"confidence\": 0.86457527\n      },\n      \"right_eyelids\": {\n        \"value\": 2,\n        \"confidence\": 0.9999939\n      },\n      \"eye_pouch\": {\n        \"value\": 0,\n        \"confidence\": 0.71129924\n      },\n      \"dark_circle\": {\n        \"value\": 2,\n        \"confidence\": 0.8709661\n      },\n      \"forehead_wrinkle\": {\n        \"value\": 0,\n        \"confidence\": 0.98663366\n      },\n      \"crows_feet\": {\n        \"value\": 0,\n        \"confidence\": 0.99471366\n      },\n      \"eye_finelines\": {\n        \"value\": 0,\n        \"confidence\": 0.76371545\n      },\n      \"glabella_wrinkle\": {\n        \"value\": 0,\n        \"confidence\": 0.9948193\n      },\n      \"nasolabial_fold\": {\n        \"value\": 1,\n        \"confidence\": 0.7647579\n      },\n      \"nasolabial_fold_severity\": {\n        \"value\": 0,\n        \"confidence\": 0.38291976\n      },\n      \"skin_type\": {\n        \"skin_type\": 3,\n        \"details\": {\n          \"0\": {\n            \"value\": 0,\n            \"confidence\": 0.12770121\n          },\n          \"1\": {\n            \"value\": 0,\n            \"confidence\": 0.00048093073\n          },\n          \"2\": {\n            \"value\": 0,\n            \"confidence\": 0.015949177\n          },\n          \"3\": {\n            \"value\": 1,\n            \"confidence\": 0.85586864\n          }\n        }\n      },\n      \"pores_forehead\": {\n        \"value\": 0,\n        \"confidence\": 0.5738849\n      },\n      \"pores_left_cheek\": {\n        \"value\": 0,\n        \"confidence\": 0.93943983\n      },\n      \"pores_right_cheek\": {\n        \"value\": 0,\n        \"confidence\": 0.94950986\n      },\n      \"pores_jaw\": {\n        \"value\": 0,\n        \"confidence\": 0.9227658\n      },\n      \"blackhead\": {\n        \"value\": 1,\n        \"confidence\": 0.7020023\n      },\n      \"acne\": {\n        \"rectangle\": [{\n          \"left\": 194,\n          \"top\": 303,\n          \"width\": 2,\n          \"height\": 2\n        }],\n        \"confidence\": [0.7635368]\n      },\n      \"mole\": {\n        \"rectangle\": [{\n          \"left\": 250,\n          \"top\": 220,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 247,\n          \"top\": 194,\n          \"width\": 1,\n          \"height\": 1\n        }, {\n          \"left\": 238,\n          \"top\": 192,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 225,\n          \"top\": 157,\n          \"width\": 2,\n          \"height\": 1\n        }, {\n          \"left\": 246,\n          \"top\": 153,\n          \"width\": 1,\n          \"height\": 1\n        }],\n        \"confidence\": [0.8208402, 0.50483304, 0.7991118, 0.7779304, 0.56068426]\n      },\n      \"skin_spot\": {\n        \"rectangle\": [{\n          \"left\": 185,\n          \"top\": 301,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 147,\n          \"top\": 269,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 198,\n          \"top\": 267,\n          \"width\": 5,\n          \"height\": 5\n        }, {\n          \"left\": 126,\n          \"top\": 259,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 234,\n          \"top\": 242,\n          \"width\": 5,\n          \"height\": 5\n        }, {\n          \"left\": 208,\n          \"top\": 238,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 202,\n          \"top\": 235,\n          \"width\": 1,\n          \"height\": 0\n        }, {\n          \"left\": 232,\n          \"top\": 233,\n          \"width\": 5,\n          \"height\": 5\n        }, {\n          \"left\": 238,\n          \"top\": 228,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 161,\n          \"top\": 222,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 228,\n          \"top\": 217,\n          \"width\": 4,\n          \"height\": 3\n        }, {\n          \"left\": 268,\n          \"top\": 210,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 209,\n          \"top\": 209,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 261,\n          \"top\": 202,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 197,\n          \"top\": 197,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 191,\n          \"top\": 194,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 246,\n          \"top\": 192,\n          \"width\": 3,\n          \"height\": 2\n        }, {\n          \"left\": 177,\n          \"top\": 166,\n          \"width\": 4,\n          \"height\": 5\n        }, {\n          \"left\": 108,\n          \"top\": 166,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 209,\n          \"top\": 160,\n          \"width\": 3,\n          \"height\": 2\n        }, {\n          \"left\": 202,\n          \"top\": 156,\n          \"width\": 5,\n          \"height\": 4\n        }, {\n          \"left\": 208,\n          \"top\": 153,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 122,\n          \"top\": 140,\n          \"width\": 5,\n          \"height\": 6\n        }, {\n          \"left\": 191,\n          \"top\": 136,\n          \"width\": 5,\n          \"height\": 6\n        }, {\n          \"left\": 190,\n          \"top\": 130,\n          \"width\": 2,\n          \"height\": 3\n        }, {\n          \"left\": 197,\n          \"top\": 129,\n          \"width\": 5,\n          \"height\": 5\n        }, {\n          \"left\": 173,\n          \"top\": 127,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 232,\n          \"top\": 128,\n          \"width\": 2,\n          \"height\": 3\n        }, {\n          \"left\": 210,\n          \"top\": 122,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 144,\n          \"top\": 115,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 228,\n          \"top\": 111,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 220,\n          \"top\": 111,\n          \"width\": 4,\n          \"height\": 4\n        }, {\n          \"left\": 212,\n          \"top\": 111,\n          \"width\": 1,\n          \"height\": 1\n        }, {\n          \"left\": 177,\n          \"top\": 108,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 208,\n          \"top\": 90,\n          \"width\": 7,\n          \"height\": 4\n        }, {\n          \"left\": 155,\n          \"top\": 89,\n          \"width\": 5,\n          \"height\": 6\n        }],\n        \"confidence\": [0.6794659, 0.6727368, 0.7586472, 0.597723, 0.70978504, 0.784, 0.501096, 0.78379506, 0.7839527, 0.6606378, 0.8354697, 0.79864424, 0.7808354, 0.8131023, 0.7687272, 0.77838933, 0.55426335, 0.6538554, 0.7515795, 0.6044133, 0.7972673, 0.63505465, 0.7730009, 0.7623031, 0.63691604, 0.7718079, 0.6167233, 0.7739385, 0.65120256, 0.5983511, 0.5979437, 0.5614116, 0.58953816, 0.73090404, 0.56540304, 0.7895413]\n      },\n      \"closed_comedones\": {\n        \"rectangle\": [{\n          \"left\": 168,\n          \"top\": 290,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 160,\n          \"top\": 284,\n          \"width\": 4,\n          \"height\": 3\n        }, {\n          \"left\": 157,\n          \"top\": 197,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 255,\n          \"top\": 189,\n          \"width\": 1,\n          \"height\": 0\n        }, {\n          \"left\": 266,\n          \"top\": 188,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 221,\n          \"top\": 187,\n          \"width\": 3,\n          \"height\": 3\n        }, {\n          \"left\": 201,\n          \"top\": 163,\n          \"width\": 0,\n          \"height\": 1\n        }, {\n          \"left\": 204,\n          \"top\": 161,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 165,\n          \"top\": 143,\n          \"width\": 0,\n          \"height\": 1\n        }, {\n          \"left\": 188,\n          \"top\": 123,\n          \"width\": 2,\n          \"height\": 2\n        }, {\n          \"left\": 190,\n          \"top\": 118,\n          \"width\": 4,\n          \"height\": 3\n        }, {\n          \"left\": 185,\n          \"top\": 114,\n          \"width\": 1,\n          \"height\": 1\n        }, {\n          \"left\": 237,\n          \"top\": 106,\n          \"width\": 1,\n          \"height\": 2\n        }, {\n          \"left\": 214,\n          \"top\": 90,\n          \"width\": 2,\n          \"height\": 3\n        }, {\n          \"left\": 225,\n          \"top\": 81,\n          \"width\": 1,\n          \"height\": 0\n        }],\n        \"confidence\": [0.7360865, 0.7588391, 0.64200145, 0.6060637, 0.698559, 0.6635037, 0.5316122, 0.6298983, 0.5407239, 0.54378927, 0.69189507, 0.6087135, 0.5951539, 0.6341534, 0.5244349]\n      }\n    },\n    \"warning\": [],\n    \"face_rectangle\": {\n      \"top\": 144,\n      \"left\": 103,\n      \"width\": 188,\n      \"height\": 188\n    }\n  }; // set isMounted to false when we unmount the component\n\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const sendSkinRequest = useCallback(async () => {\n    function DataURIToBlob(dataURI) {\n      const splitDataURI = dataURI.split(',');\n      const byteString = splitDataURI[0].indexOf('base64') >= 0 ? atob(splitDataURI[1]) : decodeURI(splitDataURI[1]);\n      const mimeString = splitDataURI[0].split(':')[1].split(';')[0];\n      const ia = new Uint8Array(byteString.length);\n\n      for (let i = 0; i < byteString.length; i++) ia[i] = byteString.charCodeAt(i);\n\n      return new Blob([ia], {\n        type: mimeString\n      });\n    }\n\n    if (isSendingSkin) return; // update state\n\n    setIsSendingSkin(true);\n    const file = DataURIToBlob(props.img);\n    var data = new FormData();\n    data.append('file', file); //     for(var pair of data.entries()) {\n    //         console.log(pair[0]+ ', '+ pair[1]); \n    //    }\n\n    try {\n      const result = await fetch('https://aebbe9f73e8e.ngrok.io/predict', {\n        method: 'POST',\n        //headers: { \"Content-Type\": \"multipart/form-data\" },\n        body: data\n      }); // const res = await result.json(); \n      // console.log(res)\n    } catch (e) {\n      return null;\n    }\n\n    if (isMounted.current) // only update if we are still mounted\n      setIsSendingSkin(false);\n  }, [isSendingSkin]); // update the callback if the state changes\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.grid_root,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardActionArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardMedia, {\n    component: \"img\",\n    alt: \"Contemplative Reptile\",\n    height: \"140\",\n    image: props.img,\n    title: \"Contemplative Reptile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"\\u622A\\u56FE\\u7ED3\\u679C\\u533A\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"\\u53EF\\u4EE5\\u9009\\u62E9\\u5C06\\u622A\\u56FE\\u4E0A\\u4F20\\u81F3\\u542F\\u51CC\\u670D\\u52A1\\u5668\\uFF0C\\u67E5\\u770B\\u81EA\\u5DF1\\u8138\\u90E8\\u7684\\u76AE\\u80A4\\u60C5\\u51B5\\u548C\\u4E94\\u5B98\\u6BD4\\u4F8B\\u5206\\u6790\\uFF5E\"))), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    color: \"primary\",\n    disabled: isSendingSkin,\n    onClick: sendSkinRequest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"\\u76AE\\u80A4\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, \"\\u4E94\\u5B98\\u5206\\u6790\")))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FaceFeedback, {\n    skin_color: skin_color[res.result.skin_color.value],\n    left_eyelids: left_eyelids[res.result.left_eyelids.value],\n    right_eyelids: right_eyelids[res.result.right_eyelids.value],\n    crows_feet: crows_feet[res.result.crows_feet.value],\n    dark_circle: dark_circle[res.result.dark_circle.value],\n    blackhead: blackhead[res.result.blackhead.value],\n    skin_type: skin_type[res.result.skin_type.value],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/zelinpu/Desktop/the-mountain/src/Snip.js"],"names":["React","useState","useRef","useEffect","useCallback","makeStyles","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Box","Container","Grid","Typography","FaceFeedback","useStyles","root","maxWidth","grid_root","flexGrow","ImgCard","props","classes","isSendingSkin","setIsSendingSkin","isSendingOrgans","setIsSendingOrgans","isMounted","skin_color","left_eyelids","right_eyelids","crows_feet","dark_circle","blackhead","skin_type","res","current","sendSkinRequest","DataURIToBlob","dataURI","splitDataURI","split","byteString","indexOf","atob","decodeURI","mimeString","ia","Uint8Array","length","i","charCodeAt","Blob","type","file","img","data","FormData","append","result","fetch","method","body","e","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,EAA6CC,WAA7C,QAA+D,OAA/D;AACA,SAASC,UAAT,QAA4B,0BAA5B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAAQC,MAAR,EAAgBC,GAAhB,EAAqBC,SAArB,EAAgCC,IAAhC,QAA6C,mBAA7C;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,YAAP,MAAyB,SAAzB;AAEA,MAAMC,SAAS,GAAGZ,UAAU,CAAC;AAC3Ba,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GADqB;AAI3BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD;AAJgB,CAAD,CAA5B;AASA,eAAe,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACrC,QAAMC,OAAO,GAAGP,SAAS,EAAzB;AACA,QAAM,CAACQ,aAAD,EAAgBC,gBAAhB,IAAoCzB,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAAC0B,eAAD,EAAkBC,kBAAlB,IAAwC3B,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM4B,SAAS,GAAG3B,MAAM,CAAC,IAAD,CAAxB;AAIA,QAAM4B,UAAU,GAAG,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAAnB;AACA,QAAMC,YAAY,GAAG,CAAC,KAAD,EAAO,OAAP,EAAe,OAAf,CAArB;AACA,QAAMC,aAAa,GAAG,CAAC,KAAD,EAAO,OAAP,EAAe,OAAf,CAAtB;AACA,QAAMC,UAAU,GAAG,CAAC,GAAD,EAAM,GAAN,CAAnB;AACA,QAAMC,WAAW,GAAG,CAAC,GAAD,EAAM,KAAN,EAAa,KAAb,EAAoB,KAApB,CAApB;AACA,QAAMC,SAAS,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,IAAlB,CAAlB;AACA,QAAMC,SAAS,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,KAAnB,CAAlB;AAGA,QAAMC,GAAG,GAAG;AAAC,kBAAa,iDAAd;AAAgE,iBAAY,GAA5E;AAAgF,cAAS;AAAC,oBAAa;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAd;AAAiD,kBAAW;AAAC,iBAAQ;AAAT,OAA5D;AAAyE,sBAAe;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAxF;AAA4H,uBAAgB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAA5I;AAA+K,mBAAY;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAA3L;AAA+N,qBAAc;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAA7O;AAAgR,0BAAmB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAnS;AAAuU,oBAAa;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAApV;AAAwX,uBAAgB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAxY;AAA4a,0BAAmB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAA/b;AAAke,yBAAkB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAApf;AAAuhB,kCAA2B;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAljB;AAAslB,mBAAY;AAAC,qBAAY,CAAb;AAAe,mBAAU;AAAC,eAAI;AAAC,qBAAQ,CAAT;AAAW,0BAAa;AAAxB,WAAL;AAAyC,eAAI;AAAC,qBAAQ,CAAT;AAAW,0BAAa;AAAxB,WAA7C;AAAoF,eAAI;AAAC,qBAAQ,CAAT;AAAW,0BAAa;AAAxB,WAAxF;AAA6H,eAAI;AAAC,qBAAQ,CAAT;AAAW,0BAAa;AAAxB;AAAjI;AAAzB,OAAlmB;AAAkyB,wBAAiB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAnzB;AAAs1B,0BAAmB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAz2B;AAA64B,2BAAoB;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAj6B;AAAq8B,mBAAY;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAj9B;AAAo/B,mBAAY;AAAC,iBAAQ,CAAT;AAAW,sBAAa;AAAxB,OAAhgC;AAAmiC,cAAO;AAAC,qBAAY,CAAC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAD,CAAb;AAA2D,sBAAa,CAAC,SAAD;AAAxE,OAA1iC;AAA+nC,cAAO;AAAC,qBAAY,CAAC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAD,EAA6C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7C,EAAyF;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzF,EAAqI;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArI,EAAiL;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjL,CAAb;AAA2O,sBAAa,CAAC,SAAD,EAAW,UAAX,EAAsB,SAAtB,EAAgC,SAAhC,EAA0C,UAA1C;AAAxP,OAAtoC;AAAq7C,mBAAY;AAAC,qBAAY,CAAC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAD,EAA6C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7C,EAAyF;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzF,EAAqI;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArI,EAAiL;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjL,EAA6N;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7N,EAAyQ;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzQ,EAAqT;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArT,EAAiW;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjW,EAA6Y;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7Y,EAAyb;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzb,EAAqe;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAre,EAAihB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjhB,EAA6jB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7jB,EAAymB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzmB,EAAqpB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArpB,EAAisB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjsB,EAA6uB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7uB,EAAyxB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzxB,EAAq0B;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAr0B,EAAi3B;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAj3B,EAA65B;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA75B,EAAy8B;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAz8B,EAAq/B;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAr/B,EAAiiC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjiC,EAA6kC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7kC,EAAynC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAznC,EAAqqC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArqC,EAAitC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjtC,EAA6vC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7vC,EAAyyC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzyC,EAAq1C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAr1C,EAAi4C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAj4C,EAA66C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA76C,EAAy9C;AAAC,kBAAO,GAAR;AAAY,iBAAM,EAAlB;AAAqB,mBAAQ,CAA7B;AAA+B,oBAAS;AAAxC,SAAz9C,EAAogD;AAAC,kBAAO,GAAR;AAAY,iBAAM,EAAlB;AAAqB,mBAAQ,CAA7B;AAA+B,oBAAS;AAAxC,SAApgD,CAAb;AAA6jD,sBAAa,CAAC,SAAD,EAAW,SAAX,EAAqB,SAArB,EAA+B,QAA/B,EAAwC,UAAxC,EAAmD,KAAnD,EAAyD,QAAzD,EAAkE,UAAlE,EAA6E,SAA7E,EAAuF,SAAvF,EAAiG,SAAjG,EAA2G,UAA3G,EAAsH,SAAtH,EAAgI,SAAhI,EAA0I,SAA1I,EAAoJ,UAApJ,EAA+J,UAA/J,EAA0K,SAA1K,EAAoL,SAApL,EAA8L,SAA9L,EAAwM,SAAxM,EAAkN,UAAlN,EAA6N,SAA7N,EAAuO,SAAvO,EAAiP,UAAjP,EAA4P,SAA5P,EAAsQ,SAAtQ,EAAgR,SAAhR,EAA0R,UAA1R,EAAqS,SAArS,EAA+S,SAA/S,EAAyT,SAAzT,EAAmU,UAAnU,EAA8U,UAA9U,EAAyV,UAAzV,EAAoW,SAApW;AAA1kD,OAAj8C;AAA23G,0BAAmB;AAAC,qBAAY,CAAC;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAD,EAA6C;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7C,EAAyF;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzF,EAAqI;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArI,EAAiL;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjL,EAA6N;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7N,EAAyQ;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzQ,EAAqT;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAArT,EAAiW;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjW,EAA6Y;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAA7Y,EAAyb;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAzb,EAAqe;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAre,EAAihB;AAAC,kBAAO,GAAR;AAAY,iBAAM,GAAlB;AAAsB,mBAAQ,CAA9B;AAAgC,oBAAS;AAAzC,SAAjhB,EAA6jB;AAAC,kBAAO,GAAR;AAAY,iBAAM,EAAlB;AAAqB,mBAAQ,CAA7B;AAA+B,oBAAS;AAAxC,SAA7jB,EAAwmB;AAAC,kBAAO,GAAR;AAAY,iBAAM,EAAlB;AAAqB,mBAAQ,CAA7B;AAA+B,oBAAS;AAAxC,SAAxmB,CAAb;AAAiqB,sBAAa,CAAC,SAAD,EAAW,SAAX,EAAqB,UAArB,EAAgC,SAAhC,EAA0C,QAA1C,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,SAAvE,EAAiF,SAAjF,EAA2F,UAA3F,EAAsG,UAAtG,EAAiH,SAAjH,EAA2H,SAA3H,EAAqI,SAArI,EAA+I,SAA/I;AAA9qB;AAA94G,KAAzF;AAAizI,eAAU,EAA3zI;AAA8zI,sBAAiB;AAAC,aAAM,GAAP;AAAW,cAAO,GAAlB;AAAsB,eAAQ,GAA9B;AAAkC,gBAAS;AAA3C;AAA/0I,GAAZ,CAjBqC,CAkBrC;;AACAlC,EAAAA,SAAS,CAAC,MAAM;AACZ,WAAO,MAAM;AACX0B,MAAAA,SAAS,CAACS,OAAV,GAAoB,KAApB;AACD,KAFD;AAGD,GAJM,EAIJ,EAJI,CAAT;AAMA,QAAMC,eAAe,GAAGnC,WAAW,CAAC,YAAW;AAE7C,aAASoC,aAAT,CAAuBC,OAAvB,EAAgC;AAC5B,YAAMC,YAAY,GAAGD,OAAO,CAACE,KAAR,CAAc,GAAd,CAArB;AACA,YAAMC,UAAU,GAAGF,YAAY,CAAC,CAAD,CAAZ,CAAgBG,OAAhB,CAAwB,QAAxB,KAAqC,CAArC,GAAyCC,IAAI,CAACJ,YAAY,CAAC,CAAD,CAAb,CAA7C,GAAiEK,SAAS,CAACL,YAAY,CAAC,CAAD,CAAb,CAA7F;AACA,YAAMM,UAAU,GAAGN,YAAY,CAAC,CAAD,CAAZ,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,CAAnB;AAEA,YAAMM,EAAE,GAAG,IAAIC,UAAJ,CAAeN,UAAU,CAACO,MAA1B,CAAX;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,UAAU,CAACO,MAA/B,EAAuCC,CAAC,EAAxC,EACIH,EAAE,CAACG,CAAD,CAAF,GAAQR,UAAU,CAACS,UAAX,CAAsBD,CAAtB,CAAR;;AAEJ,aAAO,IAAIE,IAAJ,CAAS,CAACL,EAAD,CAAT,EAAe;AAAEM,QAAAA,IAAI,EAAEP;AAAR,OAAf,CAAP;AACD;;AAEH,QAAIvB,aAAJ,EAAmB,OAd0B,CAe7C;;AACAC,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA,UAAM8B,IAAI,GAAGhB,aAAa,CAACjB,KAAK,CAACkC,GAAP,CAA1B;AACA,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBJ,IAApB,EAnB6C,CAoBjD;AACA;AACA;;AACG,QAAG;AACF,YAAMK,MAAM,GAAG,MAAMC,KAAK,CAAC,uCAAD,EAA0C;AAClEC,QAAAA,MAAM,EAAE,MAD0D;AAElE;AACAC,QAAAA,IAAI,EAAEN;AAH4D,OAA1C,CAA1B,CADE,CAMF;AACA;AACD,KARA,CAQA,OAAMO,CAAN,EAAQ;AACT,aAAO,IAAP;AACD;;AACD,QAAIpC,SAAS,CAACS,OAAd,EAAuB;AACvBZ,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACC,GApCoC,EAoClC,CAACD,aAAD,CApCkC,CAAnC,CAzBqC,CA6DnB;;AAElB,sBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAED,OAAO,CAACJ,SAAnC;AAA8C,IAAA,OAAO,EAAE,CAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEI,OAAO,CAACN,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,SAAS,EAAC,KADZ;AAEE,IAAA,GAAG,EAAC,uBAFN;AAGE,IAAA,MAAM,EAAC,KAHT;AAIE,IAAA,KAAK,EAAEK,KAAK,CAACkC,GAJf;AAKE,IAAA,KAAK,EAAC,uBALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,YAAY,MAAxB;AAAyB,IAAA,OAAO,EAAC,IAAjC;AAAsC,IAAA,SAAS,EAAC,IAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADF,eAIE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAkD,IAAA,SAAS,EAAC,GAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0NAJF,CARF,CADF,eAkBE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAqB,IAAA,KAAK,EAAC,SAA3B;AAAqC,IAAA,QAAQ,EAAEhC,aAA/C;AAA8D,IAAA,OAAO,EAAEc,eAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,eAIE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAqB,IAAA,KAAK,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF,CAlBF,CADA,CADA,eA8BA,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,YAAD;AACI,IAAA,UAAU,EAAET,UAAU,CAACO,GAAG,CAACwB,MAAJ,CAAW/B,UAAX,CAAsBoC,KAAvB,CAD1B;AAEI,IAAA,YAAY,EAAEnC,YAAY,CAACM,GAAG,CAACwB,MAAJ,CAAW9B,YAAX,CAAwBmC,KAAzB,CAF9B;AAGI,IAAA,aAAa,EAAElC,aAAa,CAACK,GAAG,CAACwB,MAAJ,CAAW7B,aAAX,CAAyBkC,KAA1B,CAHhC;AAII,IAAA,UAAU,EAAEjC,UAAU,CAACI,GAAG,CAACwB,MAAJ,CAAW5B,UAAX,CAAsBiC,KAAvB,CAJ1B;AAKI,IAAA,WAAW,EAAIhC,WAAW,CAACG,GAAG,CAACwB,MAAJ,CAAW3B,WAAX,CAAuBgC,KAAxB,CAL9B;AAMI,IAAA,SAAS,EAAI/B,SAAS,CAACE,GAAG,CAACwB,MAAJ,CAAW1B,SAAX,CAAqB+B,KAAtB,CAN1B;AAOI,IAAA,SAAS,EAAG9B,SAAS,CAACC,GAAG,CAACwB,MAAJ,CAAWzB,SAAX,CAAqB8B,KAAtB,CAPzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CA9BA,CADF;AA4CD","sourcesContent":["import React, { useState, useRef, useEffect, useCallback} from 'react';\nimport { makeStyles, } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {Button, Box, Container, Grid, } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport FaceFeedback from \"./table\";\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  grid_root: {\n    flexGrow: 1,\n  },\n});\n\nexport default function ImgCard(props) {\n  const classes = useStyles();\n  const [isSendingSkin, setIsSendingSkin] = useState(false);\n  const [isSendingOrgans, setIsSendingOrgans] = useState(false);\n  const isMounted = useRef(true);\n\n\n\n  const skin_color = ['透白','白皙','自然','小麦','黝黑',];\n  const left_eyelids = ['单眼皮','平行双眼皮','扇形双眼皮',];\n  const right_eyelids = ['单眼皮','平行双眼皮','扇形双眼皮',];\n  const crows_feet = ['无', '有',];\n  const dark_circle = ['无', '色素型', '血管型', '阴影型',];\n  const blackhead = ['无', '轻度', '中度', '重度'];\n  const skin_type = ['油性', '干性', '中性', '混合性',]\n\n\n  const res = {\"request_id\":\"1620115798,588af52b-1a18-4218-b1e1-e8cb29b2735d\",\"time_used\":203,\"result\":{\"skin_color\":{\"value\":2,\"confidence\":0.5478226},\"skin_age\":{\"value\":23},\"left_eyelids\":{\"value\":2,\"confidence\":0.86457527},\"right_eyelids\":{\"value\":2,\"confidence\":0.9999939},\"eye_pouch\":{\"value\":0,\"confidence\":0.71129924},\"dark_circle\":{\"value\":2,\"confidence\":0.8709661},\"forehead_wrinkle\":{\"value\":0,\"confidence\":0.98663366},\"crows_feet\":{\"value\":0,\"confidence\":0.99471366},\"eye_finelines\":{\"value\":0,\"confidence\":0.76371545},\"glabella_wrinkle\":{\"value\":0,\"confidence\":0.9948193},\"nasolabial_fold\":{\"value\":1,\"confidence\":0.7647579},\"nasolabial_fold_severity\":{\"value\":0,\"confidence\":0.38291976},\"skin_type\":{\"skin_type\":3,\"details\":{\"0\":{\"value\":0,\"confidence\":0.12770121},\"1\":{\"value\":0,\"confidence\":0.00048093073},\"2\":{\"value\":0,\"confidence\":0.015949177},\"3\":{\"value\":1,\"confidence\":0.85586864}}},\"pores_forehead\":{\"value\":0,\"confidence\":0.5738849},\"pores_left_cheek\":{\"value\":0,\"confidence\":0.93943983},\"pores_right_cheek\":{\"value\":0,\"confidence\":0.94950986},\"pores_jaw\":{\"value\":0,\"confidence\":0.9227658},\"blackhead\":{\"value\":1,\"confidence\":0.7020023},\"acne\":{\"rectangle\":[{\"left\":194,\"top\":303,\"width\":2,\"height\":2}],\"confidence\":[0.7635368]},\"mole\":{\"rectangle\":[{\"left\":250,\"top\":220,\"width\":4,\"height\":4},{\"left\":247,\"top\":194,\"width\":1,\"height\":1},{\"left\":238,\"top\":192,\"width\":4,\"height\":4},{\"left\":225,\"top\":157,\"width\":2,\"height\":1},{\"left\":246,\"top\":153,\"width\":1,\"height\":1}],\"confidence\":[0.8208402,0.50483304,0.7991118,0.7779304,0.56068426]},\"skin_spot\":{\"rectangle\":[{\"left\":185,\"top\":301,\"width\":4,\"height\":4},{\"left\":147,\"top\":269,\"width\":4,\"height\":4},{\"left\":198,\"top\":267,\"width\":5,\"height\":5},{\"left\":126,\"top\":259,\"width\":4,\"height\":4},{\"left\":234,\"top\":242,\"width\":5,\"height\":5},{\"left\":208,\"top\":238,\"width\":4,\"height\":5},{\"left\":202,\"top\":235,\"width\":1,\"height\":0},{\"left\":232,\"top\":233,\"width\":5,\"height\":5},{\"left\":238,\"top\":228,\"width\":4,\"height\":4},{\"left\":161,\"top\":222,\"width\":2,\"height\":2},{\"left\":228,\"top\":217,\"width\":4,\"height\":3},{\"left\":268,\"top\":210,\"width\":4,\"height\":5},{\"left\":209,\"top\":209,\"width\":2,\"height\":2},{\"left\":261,\"top\":202,\"width\":4,\"height\":5},{\"left\":197,\"top\":197,\"width\":4,\"height\":5},{\"left\":191,\"top\":194,\"width\":4,\"height\":5},{\"left\":246,\"top\":192,\"width\":3,\"height\":2},{\"left\":177,\"top\":166,\"width\":4,\"height\":5},{\"left\":108,\"top\":166,\"width\":2,\"height\":2},{\"left\":209,\"top\":160,\"width\":3,\"height\":2},{\"left\":202,\"top\":156,\"width\":5,\"height\":4},{\"left\":208,\"top\":153,\"width\":2,\"height\":2},{\"left\":122,\"top\":140,\"width\":5,\"height\":6},{\"left\":191,\"top\":136,\"width\":5,\"height\":6},{\"left\":190,\"top\":130,\"width\":2,\"height\":3},{\"left\":197,\"top\":129,\"width\":5,\"height\":5},{\"left\":173,\"top\":127,\"width\":2,\"height\":2},{\"left\":232,\"top\":128,\"width\":2,\"height\":3},{\"left\":210,\"top\":122,\"width\":4,\"height\":4},{\"left\":144,\"top\":115,\"width\":2,\"height\":2},{\"left\":228,\"top\":111,\"width\":4,\"height\":4},{\"left\":220,\"top\":111,\"width\":4,\"height\":4},{\"left\":212,\"top\":111,\"width\":1,\"height\":1},{\"left\":177,\"top\":108,\"width\":2,\"height\":2},{\"left\":208,\"top\":90,\"width\":7,\"height\":4},{\"left\":155,\"top\":89,\"width\":5,\"height\":6}],\"confidence\":[0.6794659,0.6727368,0.7586472,0.597723,0.70978504,0.784,0.501096,0.78379506,0.7839527,0.6606378,0.8354697,0.79864424,0.7808354,0.8131023,0.7687272,0.77838933,0.55426335,0.6538554,0.7515795,0.6044133,0.7972673,0.63505465,0.7730009,0.7623031,0.63691604,0.7718079,0.6167233,0.7739385,0.65120256,0.5983511,0.5979437,0.5614116,0.58953816,0.73090404,0.56540304,0.7895413]},\"closed_comedones\":{\"rectangle\":[{\"left\":168,\"top\":290,\"width\":2,\"height\":2},{\"left\":160,\"top\":284,\"width\":4,\"height\":3},{\"left\":157,\"top\":197,\"width\":2,\"height\":2},{\"left\":255,\"top\":189,\"width\":1,\"height\":0},{\"left\":266,\"top\":188,\"width\":2,\"height\":2},{\"left\":221,\"top\":187,\"width\":3,\"height\":3},{\"left\":201,\"top\":163,\"width\":0,\"height\":1},{\"left\":204,\"top\":161,\"width\":2,\"height\":2},{\"left\":165,\"top\":143,\"width\":0,\"height\":1},{\"left\":188,\"top\":123,\"width\":2,\"height\":2},{\"left\":190,\"top\":118,\"width\":4,\"height\":3},{\"left\":185,\"top\":114,\"width\":1,\"height\":1},{\"left\":237,\"top\":106,\"width\":1,\"height\":2},{\"left\":214,\"top\":90,\"width\":2,\"height\":3},{\"left\":225,\"top\":81,\"width\":1,\"height\":0}],\"confidence\":[0.7360865,0.7588391,0.64200145,0.6060637,0.698559,0.6635037,0.5316122,0.6298983,0.5407239,0.54378927,0.69189507,0.6087135,0.5951539,0.6341534,0.5244349]}},\"warning\":[],\"face_rectangle\":{\"top\":144,\"left\":103,\"width\":188,\"height\":188}}\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n      return () => {\n        isMounted.current = false\n      }\n    }, [])\n\n  const sendSkinRequest = useCallback(async() => {\n\n    function DataURIToBlob(dataURI) {\n        const splitDataURI = dataURI.split(',')\n        const byteString = splitDataURI[0].indexOf('base64') >= 0 ? atob(splitDataURI[1]) : decodeURI(splitDataURI[1])\n        const mimeString = splitDataURI[0].split(':')[1].split(';')[0]\n\n        const ia = new Uint8Array(byteString.length)\n        for (let i = 0; i < byteString.length; i++)\n            ia[i] = byteString.charCodeAt(i)\n\n        return new Blob([ia], { type: mimeString })\n      }\n\n    if (isSendingSkin) return\n    // update state\n    setIsSendingSkin(true)\n    const file = DataURIToBlob(props.img)\n    var data = new FormData();\n    data.append('file', file)\n//     for(var pair of data.entries()) {\n//         console.log(pair[0]+ ', '+ pair[1]); \n//    }\n   try{    \n    const result = await fetch('https://aebbe9f73e8e.ngrok.io/predict', {\n      method: 'POST',\n      //headers: { \"Content-Type\": \"multipart/form-data\" },\n      body: data,\n  });\n    // const res = await result.json(); \n    // console.log(res)\n  }catch(e){\n  return null;\n}\nif (isMounted.current) // only update if we are still mounted\nsetIsSendingSkin(false)\n}, [isSendingSkin]) // update the callback if the state changes\n\n  return (\n    <Grid container className={classes.grid_root} spacing={2}>\n    <Grid item xs={6}>\n    <Card className={classes.root}>\n      <CardActionArea>\n        <CardMedia\n          component=\"img\"\n          alt=\"Contemplative Reptile\"\n          height=\"140\"\n          image={props.img}\n          title=\"Contemplative Reptile\"\n        />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            截图结果区\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            可以选择将截图上传至启凌服务器，查看自己脸部的皮肤情况和五官比例分析～\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardActions>\n        <Button size=\"small\" color=\"primary\" disabled={isSendingSkin} onClick={sendSkinRequest}>\n          皮肤状态\n        </Button>\n        <Button size=\"small\" color=\"primary\">\n          五官分析\n        </Button>\n      </CardActions>\n    </Card>\n    </Grid>    \n    <Grid item xs={6}>\n    <FaceFeedback \n        skin_color={skin_color[res.result.skin_color.value]}\n        left_eyelids={left_eyelids[res.result.left_eyelids.value]}\n        right_eyelids={right_eyelids[res.result.right_eyelids.value]}\n        crows_feet={crows_feet[res.result.crows_feet.value]}\n        dark_circle = {dark_circle[res.result.dark_circle.value]}\n        blackhead = {blackhead[res.result.blackhead.value]}\n        skin_type ={skin_type[res.result.skin_type.value]}\n    />\n    </Grid>\n    </Grid>\n  );\n}"]},"metadata":{},"sourceType":"module"}