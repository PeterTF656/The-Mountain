{"ast":null,"code":"var _jsxFileName = \"/Users/zelinpu/Desktop/the-mountain/src/Snip.js\";\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345\n  }\n});\nexport default function ImgCard(props) {\n  const classes = useStyles();\n  const [isSendingSkin, setIsSendingSkin] = useState(false);\n  const [isSendingOrgans, setIsSendingOrgans] = useState(false);\n  const isMounted = useRef(true); // set isMounted to false when we unmount the component\n\n  useEffect(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  const sendSkinRequest = useCallback(async () => {\n    if (isSendingSkin) return; // update state\n\n    setIsSendingSkin(true);\n    var data = new FormData();\n    var file = props.img;\n    console.log(file); //     data.append('file', file.files[0])\n    //     for(var pair of data.entries()) {\n    //         console.log(pair[0]+ ', '+ pair[1]); \n    //    }\n\n    try {\n      const result = await fetch('https://aebbe9f73e8e.ngrok.io/predict', {\n        method: 'POST',\n        //headers: { \"Content-Type\": \"multipart/form-data\" },\n        body: file\n      });\n      const res = await result.json();\n      console.log(res);\n    } catch (e) {\n      return null;\n    }\n\n    if (isMounted.current) // only update if we are still mounted\n      setIsSendingSkin(false);\n  }, [isSendingSkin]); // update the callback if the state changes\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardActionArea, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardMedia, {\n    component: \"img\",\n    alt: \"Contemplative Reptile\",\n    height: \"140\",\n    image: props.img,\n    title: \"Contemplative Reptile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    gutterBottom: true,\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"\\u622A\\u56FE\\u7ED3\\u679C\\u533A\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, \"\\u53EF\\u4EE5\\u9009\\u62E9\\u5C06\\u622A\\u56FE\\u4E0A\\u4F20\\u81F3\\u542F\\u51CC\\u670D\\u52A1\\u5668\\uFF0C\\u67E5\\u770B\\u81EA\\u5DF1\\u8138\\u90E8\\u7684\\u76AE\\u80A4\\u60C5\\u51B5\\u548C\\u4E94\\u5B98\\u6BD4\\u4F8B\\u5206\\u6790\\uFF5E\"))), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    color: \"primary\",\n    disabled: isSendingSkin,\n    onClick: sendSkinRequest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"\\u76AE\\u80A4\\u72B6\\u6001\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"\\u4E94\\u5B98\\u5206\\u6790\")));\n}","map":{"version":3,"sources":["/Users/zelinpu/Desktop/the-mountain/src/Snip.js"],"names":["React","useState","useRef","useEffect","useCallback","makeStyles","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Typography","useStyles","root","maxWidth","ImgCard","props","classes","isSendingSkin","setIsSendingSkin","isSendingOrgans","setIsSendingOrgans","isMounted","current","sendSkinRequest","data","FormData","file","img","console","log","result","fetch","method","body","res","json","e"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useCallback} from 'react';\nimport { makeStyles, } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n});\n\nexport default function ImgCard(props) {\n  const classes = useStyles();\n  const [isSendingSkin, setIsSendingSkin] = useState(false);\n  const [isSendingOrgans, setIsSendingOrgans] = useState(false);\n  const isMounted = useRef(true);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n      return () => {\n        isMounted.current = false\n      }\n    }, [])\n\n  const sendSkinRequest = useCallback(async() => {\n    if (isSendingSkin) return\n    // update state\n    setIsSendingSkin(true)\n    var data = new FormData();\n    var file = props.img\n    console.log(file);\n//     data.append('file', file.files[0])\n//     for(var pair of data.entries()) {\n//         console.log(pair[0]+ ', '+ pair[1]); \n//    }\n   try{    \n    const result = await fetch('https://aebbe9f73e8e.ngrok.io/predict', {\n      method: 'POST',\n      //headers: { \"Content-Type\": \"multipart/form-data\" },\n      body: file,\n  });\n    const res = await result.json(); \n    console.log(res)\n  }catch(e){\n  return null;\n}\nif (isMounted.current) // only update if we are still mounted\nsetIsSendingSkin(false)\n}, [isSendingSkin]) // update the callback if the state changes\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea>\n        <CardMedia\n          component=\"img\"\n          alt=\"Contemplative Reptile\"\n          height=\"140\"\n          image={props.img}\n          title=\"Contemplative Reptile\"\n        />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            截图结果区\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            可以选择将截图上传至启凌服务器，查看自己脸部的皮肤情况和五官比例分析～\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardActions>\n        <Button size=\"small\" color=\"primary\" disabled={isSendingSkin} onClick={sendSkinRequest}>\n          皮肤状态\n        </Button>\n        <Button size=\"small\" color=\"primary\">\n          五官分析\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}"]},"metadata":{},"sourceType":"module"}